name: 'Configure POV-Ray CLI for Unix'
description: 'Run `configure` build step for POV-Ray CLI for Unix'

inputs:
  compiled-by: 
    description: 'COMPILED_BY value'
    required: true
    default: 'GitHub for LPub3D'
  configure-options: 
    description: 'Additional option for `configure` script'
    required: true
    default: 'LPUB3D_3RD_PARTY=yes --enable-watch-cursor --with-libsdl2'
  c-compiler:
    description: 'C Compiler to invoke'
    required: false
    default: ''
  cxx-compiler:
    description: 'C++ Compiler to invoke'
    required: false
    default: ''

runs:
  using: composite
  steps:
  - shell: bash
    run: |
      if test -n "${{inputs.c-compiler}}" ; then
        export CC="${{inputs.c-compiler}}"
      fi
      if test -n "${{inputs.cxx-compiler}}" ; then
        export CXX="${{inputs.cxx-compiler}}"
      fi
      ./configure COMPILED_BY="${{inputs.compiled-by}} ${{inputs.configure-options}}"
